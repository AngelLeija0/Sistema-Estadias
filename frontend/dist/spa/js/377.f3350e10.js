"use strict";(globalThis["webpackChunkestadias_quasar"]=globalThis["webpackChunkestadias_quasar"]||[]).push([[377],{6377:(e,t,l)=>{l.r(t),l.d(t,{default:()=>de});var a=l(59835),o=l(86970);const n=e=>((0,a.dD)("data-v-0c130d7c"),e=e(),(0,a.Cn)(),e),s={class:"container-fluid"},i={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},r={class:"row q-pt-md q-pl-xl q-pr-xl"},c={class:"col-6"},d=n((()=>(0,a._)("h5",{style:{margin:"0 0 10px 0","font-size":"18px","font-weight":"500"}}," Buscando registros por: ",-1))),u={style:{"text-transform":"normal","font-size":"14px"}},p={class:"col-6",style:{display:"flex","justify-content":"end","align-items":"flex-start"}},m={class:"row"},g={class:"col-6 q-px-md"},f={class:"col-6 q-px-md"},x={class:"col-12 q-pt-lg"},y=n((()=>(0,a._)("div",{style:{display:"flex","align-items":"center","padding-left":"30px"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"Mostrar")],-1))),w=n((()=>(0,a._)("div",{style:{display:"flex","align-items":"center"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"registros")],-1))),v={class:"container-fluid",style:{"background-color":"#f5f5f5","min-height":"50vh","margin-top":"0"}},h={class:"row"},_={key:0,class:"col-12",style:{display:"flex","justify-content":"center"}},b=n((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}},"Cargando alumnos",-1))),q={key:2,class:"col-12",style:{display:"flex","justify-content":"center"}},k=n((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}}," No se encontraron resultados ",-1))),z={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},S={class:"row q-pt-md q-pl-xl q-pr-xl"},C={class:"col-6",style:{"align-items":"end",display:"flex"}},A={class:"col-6",style:{display:"flex","justify-content":"end"}};function W(e,t,l,n,W,Z){const j=(0,a.up)("AdminNavbar"),Q=(0,a.up)("q-btn"),H=(0,a.up)("q-card-actions"),P=(0,a.up)("q-card"),E=(0,a.up)("q-dialog"),I=(0,a.up)("q-item-label"),R=(0,a.up)("q-item-section"),D=(0,a.up)("q-item"),B=(0,a.up)("q-list"),L=(0,a.up)("q-btn-dropdown"),T=(0,a.up)("q-btn-group"),F=(0,a.up)("q-spinner-hourglass"),G=(0,a.up)("q-card-section"),M=(0,a.up)("CardAlumno"),N=(0,a.up)("CardProyecto"),O=(0,a.up)("q-icon"),U=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(j,{onReloadStudents:e.loadStudents,style:{display:"none"}},null,8,["onReloadStudents"])]),(0,a._)("div",s,[(0,a.Wm)(H,{style:{"background-color":"#f5f5f5",display:"flex","justify-content":"start"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{flat:"",color:"black",label:"Regresar",icon:"arrow_left",style:{margin:"3px","text-transform":"capitalize","font-size":"16px"},onClick:e.toBack},null,8,["onClick"])])),_:1})]),(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",c,[d,(0,a._)("p",u,(0,o.zw)(e.filteringBy),1)]),(0,a._)("div",p,[(0,a.Wm)(H,{style:{"padding-top":"0"}},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{class:"q-icon-sm",color:"green-7","text-color":"white",label:"Excel","bg-color":"green",icon:"file_download",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"16px"},onClick:t[0]||(t[0]=t=>e.dialogExcel=!0)}),(0,a.Wm)(E,{modelValue:e.dialogExcel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.dialogExcel=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{class:"q-pa-xl q-ma-lg",style:{width:"600px","background-color":"#f5f5f5"}},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",g,[(0,a.Wm)(Q,{color:"green-7","text-color":"white",label:"Excel General",style:{height:"100px","text-transform":"capitalize","font-size":"16px",width:"100%"},onClick:t[1]||(t[1]=t=>e.toGenerateExcel("general"))})]),(0,a._)("div",f,[(0,a.Wm)(Q,{color:"green-7","text-color":"white",label:"Excel con filtros actuales",style:{height:"100px","text-transform":"capitalize","font-size":"16px",width:"100%"},onClick:t[2]||(t[2]=t=>e.toGenerateExcel("specific"))})]),(0,a._)("div",x,[(0,a.wy)((0,a.Wm)(Q,{outline:"",color:"red",label:"Cancelar",style:{width:"100%"}},null,512),[[U]])])])])),_:1})])),_:1},8,["modelValue"]),y,(0,a.Wm)(L,{outline:"",color:"black",label:e.quantityRecords,style:{margin:"3px 5px",padding:"0px 0px 0 10px","text-transform":"capitalize","font-size":"16px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredRecords,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(D,{key:t,label:t,onClick:l=>e.setRecords(t),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","onClick"])),[[U]]))),128))])),_:1})])),_:1},8,["label"]),w])),_:1})])),_:1})])])]),(0,a._)("div",v,[(0,a._)("div",h,[e.studentsLoaded?((0,a.wg)(),(0,a.iD)("div",_,[(0,a.Wm)(P,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[b,(0,a.Wm)(F,{color:"primary",size:"4em"})])),_:1})])),_:1})])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.students,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-lg-3 col-md-4 col-sm-6 col-6",key:l},["liberados"!==e.typeCard?((0,a.wg)(),(0,a.j4)(M,(0,a.dG)({key:0},t,{class:"q-ml-xl q-mr-xl q-mb-xl"}),null,16)):((0,a.wg)(),(0,a.j4)(N,(0,a.dG)({key:1},t,{class:"q-ml-xl q-mr-xl q-mb-xl"}),null,16))])))),128)),e.studentsEmpty?((0,a.wg)(),(0,a.iD)("div",q,[(0,a.Wm)(P,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[k,(0,a.Wm)(O,{name:"error_outline",color:"negative",size:"8em"})])),_:1})])),_:1})])):(0,a.kq)("",!0)])]),(0,a._)("div",z,[(0,a._)("div",S,[(0,a._)("div",C,[(0,a._)("p",null," Mostrando "+(0,o.zw)(e.qStudentsShowing)+" de "+(0,o.zw)(e.qTotalStudents)+" registros ",1)]),(0,a._)("div",A,[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{flat:""},{default:(0,a.w5)((()=>[e.actualPage>1?((0,a.wg)(),(0,a.j4)(Q,{key:0,label:"Anterior",icon:"navigate_before",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[4]||(t[4]=t=>e.setPage(e.actualPage-1))})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pages,(t=>((0,a.wg)(),(0,a.j4)(Q,{key:t,color:t===e.actualPage?"dark":"grey-7",label:t,"text-color":"white",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px"},onClick:l=>e.setPage(t)},null,8,["color","label","onClick"])))),128)),e.actualPage+1<=e.pages.length?((0,a.wg)(),(0,a.j4)(Q,{key:1,label:"Siguiente","icon-right":"navigate_next",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[5]||(t[5]=t=>e.setPage(e.actualPage+1))})):(0,a.kq)("",!0)])),_:1})])),_:1})])])])],64)}l(69665),l(62309);var Z=l(60499),j=l(17736),Q=l(28339),H=l(7904),P=l(91569),E=l(83851),I=l(78900);const R={style:{"font-size":"20px","font-weight":"500","margin-bottom":"0"}},D={style:{"font-size":"20px","font-weight":"500"}},B={style:{"font-size":"18px"}},L={style:{color:"#777676","font-size":"18px"}};function T(e,t,l,n,s,i){const r=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),d=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{style:{"border-radius":"15px","text-align":"center"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{vertical:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{height:"255px"}},{default:(0,a.w5)((()=>[(0,a._)("p",R,(0,o.zw)(e.nombre),1),(0,a._)("p",D,(0,o.zw)(e.apPaterno)+" "+(0,o.zw)(e.apMaterno),1),(0,a._)("p",B,(0,o.zw)(e.carrera)+" "+(0,o.zw)(e.area)+" - "+(0,o.zw)(e.grado)+"Â°"+(0,o.zw)(e.grupo),1),(0,a._)("p",L,(0,o.zw)(e.proyecto),1)])),_:1}),(0,a.Wm)(d,{style:{display:"flex","justify-content":"center"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{style:{"font-size":"16px","font-weight":"400","text-transform":"capitalize",padding:"10px 40px",background:"#1ab192",color:"white"},rounded:"",label:"Ver perfil",to:e.profileLink},null,8,["to"])])),_:1})])),_:1})])),_:1})}const F=(0,a.aZ)({name:"CardProyecto",props:{nombre:{type:String},apPaterno:{type:String},apMaterno:{type:Number},nivelAcademico:{type:Date},carrera:{type:String},area:{type:String},matricula:{type:String},idAlumno:{type:String},proyecto:{type:String},grado:{type:String},grupo:{type:String}},setup(e){const t=(0,Q.tv)(),l=t.currentRoute.value.name;console.log(l);const o=(0,a.Fl)((()=>"asesor-inicio"===l?{name:"asesor-alumnoId",params:{id:e.idAlumno}}:"admin-listaAlumnos"===l?{name:"admin-alumnoId",params:{id:e.idAlumno}}:"vinculacion-listaAlumnos"===l?{name:"vinculacion-alumnoId",params:{id:e.idAlumno}}:{path:"/"}));return{profileLink:o}}});var G=l(11639),M=l(44458),N=l(63190),O=l(11821),U=l(68879),V=l(69984),Y=l.n(V);const J=(0,G.Z)(F,[["render",T]]),K=J;Y()(F,"components",{QCard:M.Z,QCardSection:N.Z,QCardActions:O.Z,QBtn:U.Z});const $=(0,a.aZ)({name:"admin-listaAlumnos",components:{AdminNavbar:E.Z,CardAlumno:I.Z,CardProyecto:K},setup(){const e=(0,H.f)(),t=(0,Z.iH)([]),l=(0,j.r)(),o=(0,Q.tv)(),n=(0,Z.iH)(!0),s=(0,Z.iH)(!1),i=(0,Z.iH)(null),r=(0,Z.iH)(),c=(0,Z.iH)(l.filter.estado),d=(0,Z.iH)(8),u=(0,Z.iH)(1),p=(0,Z.iH)([]),m=(0,Z.iH)([8,12,14,16,18,20]),g=(0,Z.iH)(0),f=(0,Z.iH)(0);function x(){const e=window.sessionStorage.getItem("filter"),t=JSON.parse(e.replace(/__q_objt\||__q_strn\|/g,""));let l="";Object.keys(t).map((e=>{"proceso"===t[e]?l+="Alumnos en proceso, ":"liberados"==t[e]?l+="Alumnos liberados, ":l+=t[e]+", "})),i.value=l.slice(0,-2)}function y(){try{s.value=!1,n.value=!0,t.value=[],x(),setTimeout((()=>{const e=window.sessionStorage.getItem("data-api");if(null===e)return y();const l=e.replace(/__q_objt\||__q_strn\|/g,"");if(console.log(l),"No se encontraron alumnos"===l)return t.value=[],g.value=0,f.value=0,s.value=!0,n.value=!1,void x();const a=JSON.parse(l);if(0===Object.keys(a).length)return d.value=0,s.value=!0,void(n.value=!1);w(a)}),2e3)}catch(e){d.value=0,s.value=!0,n.value=!1,setTimeout((()=>{y(),console.error(e)}),2e3)}}function w(e){try{if("object"!==typeof e||null===e)return;const l=Object.keys(e).length,a=d.value;v(l,a);let o=0,i=u.value*d.value;u.value>1&&(o=(u.value-1)*d.value);let r=[];for(let t=0,n=o;t<a&&n<i;t++,n++)void 0!==e[n]&&r.push(e[n]);t.value=r,g.value=r.length,f.value=l,n.value=!1,s.value=!1,x()}catch(l){console.error(l)}}function v(e,t){const l=Math.ceil(e/t),a=u.value,o=5;let n=a-Math.floor(o/2);n<1?n=1:n+o-1>l&&(n=l-o+1);const s=Math.min(n+o-1,l),i=[];for(let r=n;r<=s;r++)i.push(r);p.value=i}function h(e){p.value.includes(e)?(u.value=e,y()):y()}function _(e){d.value=e,y()}return(0,a.bv)((()=>{x(),y(),o.afterEach(((e,t)=>{"admin-listaAlumnos"===e.name&&y()}))})),(0,a.Jd)((()=>{o.afterEach()})),{filterStore:l,dataApiStore:e,students:t,router:o,loadStudents:y,studentsLoaded:n,studentsEmpty:s,filteringBy:i,loadFilter:x,quantityRecords:d,pages:p,records:m,actualPage:u,qStudentsShowing:g,qTotalStudents:f,studentsToShow:w,setRecords:_,setPage:h,generatePages:v,dialogExcel:r,typeCard:c}},computed:{filter(){return!this.filterStore.getFilter&&window.sessionStorage.getItem("filter")&&this.filterStore.setFilter(window.sessionStorage.getItem("filter")),this.filterStore.getFilter},filteredRecords(){return this.records.filter((e=>e!==this.quantityRecords))}},methods:{toBack(){window.sessionStorage.removeItem("filter"),this.filterStore.clearFilter(),window.sessionStorage.removeItem("data-api"),this.dataApiStore.clearDataApi(),console.clear(),this.router.push({name:"admin-alumnos"})},toGenerateExcel(e){console.log("Fetching Excel ...");const t=this.filterStore.filter,l=t.estado,a=t.nivelAcademico,o={estado:t.estado};null!==this.searcher&&(o.buscador=this.searcher),null!==this.selectedLevel?o.nivelAcademico=this.selectedLevel:a&&(o.nivelAcademico=a),this.selectedCareer&&(o.carrera=this.selectedCareer),this.selectedArea&&(o.area=this.selectedArea);let n="";"general"==e&&(n=`./admin/alumnos/${l}/excel-general`),"specific"==e&&(n=`./admin/alumnos/${l}/excel`),P.api.post(n,{filtro:t},{responseType:"blob"}).then((e=>{if(e.data.msg)console.log(e.data.msg);else{const t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.setAttribute("download",`alumnos-${l}.xlsx`),document.body.appendChild(o),o.click(),document.body.removeChild(o)}})).catch((e=>console.error(e)))}}});var X=l(67236),ee=l(22857),te=l(87743),le=l(32045),ae=l(13246),oe=l(490),ne=l(76749),se=l(33115),ie=l(96335),re=l(62146);const ce=(0,G.Z)($,[["render",W],["__scopeId","data-v-0c130d7c"]]),de=ce;Y()($,"components",{QCardActions:O.Z,QBtn:U.Z,QBtnGroup:X.Z,QIcon:ee.Z,QDialog:te.Z,QCard:M.Z,QBtnDropdown:le.Z,QList:ae.Z,QItem:oe.Z,QItemSection:ne.Z,QItemLabel:se.Z,QCardSection:N.Z,QSpinnerHourglass:ie.Z}),Y()($,"directives",{ClosePopup:re.Z})}}]);