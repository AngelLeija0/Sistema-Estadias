"use strict";(globalThis["webpackChunkestadias_quasar"]=globalThis["webpackChunkestadias_quasar"]||[]).push([[672],{21672:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ue});var t=l(59835),i=l(86970);const o=e=>((0,t.dD)("data-v-1132969a"),e=e(),(0,t.Cn)(),e),s={class:"container-fluid"},r={class:"container-fluid",style:{"background-color":"#f5f5f5","min-height":"74vh","margin-top":"0"}},d={class:"row"},n={key:0,class:"col-12 q-pa-lg",style:{display:"flex","justify-content":"center"}},c=o((()=>(0,t._)("h1",{style:{"font-size":"24px","font-weight":"400"}},"Cargando alumnos",-1))),m={key:1,class:"col-12 q-px-lg"},u=o((()=>(0,t._)("h6",{style:{margin:"30px 10px"}},"Administradores de carrera",-1))),p={class:"row q-ma-sm"},g={class:"col-12",style:{display:"flex","justify-content":"end"}},f=o((()=>(0,t._)("div",{class:"col-12 q-pa-md"},[(0,t._)("div",{class:"text-h6 text-center",style:{"font-size":"22px","font-weight":"500"}}," ¿Estas seguro de borrarlo? ")],-1))),w={class:"col-12 q-pt-xl"},x={class:"row q-ma-md"},h=o((()=>(0,t._)("div",{class:"col-6 q-pb-md",style:{display:"flex","align-items":"center"}},[(0,t._)("div",{class:"text-h6",style:{"font-size":"28px","font-weight":"500"}}," Administrador ")],-1))),v={class:"col-6",style:{display:"flex","justify-content":"end"}},y={class:"col-12"},_={class:"row"},b={class:"col-6 q-pb-lg"},q={style:{width:"90%"}},W={class:"col-6 q-pb-lg"},A={style:{width:"90%"}},C={class:"col-12 q-pb-lg"},k={style:{width:"90%"}},z={class:"col-12 q-pb-lg"},V={style:{width:"90%"}},H={class:"col-12",style:{display:"flex","justify-content":"end","align-items":"end"}},U={class:"row q-ma-sm"},Z={class:"col-12",style:{display:"flex","justify-content":"end"}},S=o((()=>(0,t._)("div",{class:"col-12 q-pa-md"},[(0,t._)("div",{class:"text-h6 text-center",style:{"font-size":"22px","font-weight":"500"}}," Cambiar contraseña ")],-1))),P={class:"col-12 q-pa-sm"},Q=o((()=>(0,t._)("div",{class:"text-h6"},"Administrador modificado correctamente",-1))),D=o((()=>(0,t._)("div",{class:"text-h6"},"Administrador agregado correctamente",-1))),j=o((()=>(0,t._)("div",{class:"text-h6"},"Ha ocurrido un error",-1)));function E(e,a,l,o,E,T){const R=(0,t.up)("q-btn"),I=(0,t.up)("q-card-actions"),B=(0,t.up)("q-spinner-hourglass"),N=(0,t.up)("q-card-section"),L=(0,t.up)("q-card"),Y=(0,t.up)("q-btn-group"),F=(0,t.up)("q-td"),M=(0,t.up)("q-tr"),O=(0,t.up)("q-table"),G=(0,t.up)("q-dialog"),K=(0,t.up)("q-input"),J=(0,t.up)("q-select"),X=(0,t.up)("q-icon"),$=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",null,[(0,t._)("div",s,[(0,t.Wm)(I,{style:{"background-color":"#f5f5f5",display:"flex","justify-content":"start"}},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{flat:"",color:"black",label:"Regresar",icon:"arrow_left",style:{margin:"3px","text-transform":"capitalize","font-size":"16px"},onClick:e.toBack},null,8,["onClick"])])),_:1})]),(0,t._)("div",r,[(0,t._)("div",d,[e.administratorsLoaded?((0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(L,{class:"q-ma-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,t.w5)((()=>[c,(0,t.Wm)(B,{color:"primary",size:"4em"})])),_:1})])),_:1})])):((0,t.wg)(),(0,t.iD)("div",m,[u,(0,t.Wm)(R,{style:{margin:"0px 100px 30px","margin-top":"10px",padding:"12px","text-transform":"none"},color:"primary",label:"Agregar nuevo administrador","icon-right":"add",onClick:a[0]||(a[0]=a=>e.dialogAddAdministrator=!0)}),(0,t.Wm)(O,{rows:e.tableRows,columns:e.tableColumns,"row-key":"nombre",class:"q-mb-lg"},{body:(0,t.w5)((a=>[(0,t.Wm)(M,{props:a},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.tableColumns,(l=>((0,t.wg)(),(0,t.j4)(F,{key:l.name,props:a},{default:(0,t.w5)((()=>["actions"===l.name?((0,t.wg)(),(0,t.j4)(Y,{key:0,flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{color:"primary",size:"sm","icon-right":"edit",class:"q-mx-sm",onClick:l=>e.changePasswordAdministrator(a.row.idAdministrador)},{default:(0,t.w5)((()=>[(0,t.Uk)("Cambiar contraseña")])),_:2},1032,["onClick"]),(0,t.Wm)(R,{color:"red",size:"sm","icon-right":"delete",class:"q-mx-sm",onClick:l=>e.deleteAdministrator(a.row.idAdministrador)},{default:(0,t.w5)((()=>[(0,t.Uk)("Eliminar")])),_:2},1032,["onClick"])])),_:2},1024)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,i.zw)(a.row[l.field]),1)],64))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]))])])]),(0,t.Wm)(G,{modelValue:e.dialogDeleteAdministrator,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogDeleteAdministrator=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-pt-md q-pl-md q-pr-md",style:{width:"500px","max-width":"60vw",height:"40vh"}},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t._)("div",g,[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(R,{align:"right",flat:"",color:"red",icon:"close",style:{margin:"3px","padding-left":"25px","padding-right":"25px","text-transform":"capitalize","font-size":"16px"}},null,512),[[$]])])),_:1})]),f,(0,t._)("div",w,[(0,t.Wm)(I,{class:"bg-white text-teal",align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{color:"red",label:"Borrar",icon:"delete",style:{margin:"3px","padding-left":"20px","padding-right":"20px","text-transform":"capitalize","font-size":"14px"},onClick:a[1]||(a[1]=a=>e.deleteAdministrator(e.adminSelected,!0))}),(0,t.wy)((0,t.Wm)(R,{color:"black",label:"Cancelar",style:{margin:"3px","padding-left":"20px","padding-right":"20px","text-transform":"capitalize","font-size":"14px"}},null,512),[[$]])])),_:1})])),_:1})])])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(G,{modelValue:e.dialogAddAdministrator,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dialogAddAdministrator=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-pt-md q-pl-md q-pr-md",style:{width:"700px","max-width":"80vw",height:"450px"}},{default:(0,t.w5)((()=>[(0,t._)("div",x,[h,(0,t._)("div",v,[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(R,{flat:"",color:"red",icon:"close",style:{margin:"3px","padding-left":"25px","padding-right":"25px","text-transform":"capitalize","font-size":"16px"}},null,512),[[$]])])),_:1})]),(0,t._)("div",y,[(0,t._)("div",_,[(0,t._)("div",b,[(0,t._)("div",q,[(0,t.Wm)(K,{outline:"",modelValue:e.dialogUsername,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialogUsername=a),label:"Usuario","input-style":"font-size: 14px; border-radius: 5px;"},null,8,["modelValue"])])]),(0,t._)("div",W,[(0,t._)("div",A,[(0,t.Wm)(K,{modelValue:e.dialogEmail,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogEmail=a),type:"text",label:"Correo institucional",suffix:"@uttn.mx",rules:e.emailRules,color:"primary","bottom-slots":"prepend","prefix-icon":"mdi-lock","input-style":"font-size: 14px; border-radius: 5px;"},null,8,["modelValue","rules"])])]),(0,t._)("div",C,[(0,t._)("div",k,[(0,t.Wm)(K,{outline:"",modelValue:e.dialogPassword,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dialogPassword=a),label:"Contraseña","input-style":"font-size: 14px; border-radius: 5px;"},null,8,["modelValue"])])]),(0,t._)("div",z,[(0,t._)("div",V,[(0,t.Wm)(J,{"label-color":"black",clearable:"",modelValue:e.dialogCareer,"onUpdate:modelValue":a[6]||(a[6]=a=>e.dialogCareer=a),label:"Carrera",options:e.careersOptions,"emit-value":"","map-options":"","option-label":"label","option-value":"value",style:{"font-size":"14px","border-radius":"5px"}},null,8,["modelValue","options"])])]),(0,t._)("div",H,[(0,t.Wm)(I,{class:"bg-white text-teal"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{color:"primary",label:"Agregar","icon-right":"add",style:{margin:"3px","padding-left":"25px","padding-right":"25px","text-transform":"capitalize","font-size":"16px"},onClick:e.createAdminsitrator},null,8,["onClick"])])),_:1})])),_:1})])])])])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(G,{modelValue:e.dialogChangeAdministratorPassword,"onUpdate:modelValue":a[10]||(a[10]=a=>e.dialogChangeAdministratorPassword=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-pt-md q-pl-md q-pr-md",style:{width:"500px","max-width":"60vw",height:"40vh"}},{default:(0,t.w5)((()=>[(0,t._)("div",U,[(0,t._)("div",Z,[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(R,{align:"right",flat:"",color:"red",icon:"close",style:{margin:"3px","padding-left":"25px","padding-right":"25px","text-transform":"capitalize","font-size":"16px"}},null,512),[[$]])])),_:1})]),S,(0,t._)("div",P,[(0,t.Wm)(K,{modelValue:e.dialogNewPassword,"onUpdate:modelValue":a[8]||(a[8]=a=>e.dialogNewPassword=a),filled:"",autogrow:"",style:{"font-size":"14px"}},null,8,["modelValue"]),(0,t.Wm)(I,{class:"bg-white text-teal q-pt-md",align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{color:"primary",label:"Cambiar","icon-right":"send",style:{margin:"3px","padding-left":"20px","padding-right":"20px","text-transform":"capitalize","font-size":"14px"},onClick:a[9]||(a[9]=a=>e.changePasswordAdministrator(e.adminSelected,!0))}),(0,t.wy)((0,t.Wm)(R,{flat:"",color:"white","text-color":"black",label:"Cancelar",style:{margin:"3px","padding-left":"40px","padding-right":"40px","text-transform":"capitalize","font-size":"14px"}},null,512),[[$]])])),_:1})])),_:1})])])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(G,{modelValue:e.dialogSuccess,"onUpdate:modelValue":a[11]||(a[11]=a=>e.dialogSuccess=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[null!=e.dialogNewPassword?((0,t.wg)(),(0,t.j4)(L,{key:0,style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"q-pa-lg text-center"},{default:(0,t.w5)((()=>[Q,(0,t.Wm)(X,{name:"check_circle",color:"green",size:"7em"})])),_:1})])),_:1})):((0,t.wg)(),(0,t.j4)(L,{key:1,style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"q-pa-lg text-center"},{default:(0,t.w5)((()=>[D,(0,t.Wm)(X,{name:"check_circle",color:"green",size:"7em"})])),_:1})])),_:1}))])),_:1},8,["modelValue"]),(0,t.Wm)(G,{modelValue:e.dialogError,"onUpdate:modelValue":a[12]||(a[12]=a=>e.dialogError=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"q-pa-lg text-center"},{default:(0,t.w5)((()=>[j,(0,t.Wm)(X,{name:"cancel",color:"red",size:"7em"})])),_:1}),(0,t.Wm)(N,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"])],64)}l(69665);var T=l(60499),R=l(17736),I=l(28339),B=l(7904),N=l(91569),L=l(97337),Y=l(89322),F=l(78900);const M=(0,t.aZ)({name:"superAdmin-administradores",components:{CardAlumno:F.Z},setup(){const e=(0,Y.L)(),a=(0,B.f)(),l=(0,T.iH)([]),i=(0,R.r)(),o=(0,I.tv)(),s=(0,T.iH)(!0),r=(0,T.iH)(!1),d=(0,T.iH)(!1),n=(0,T.iH)(!1),c=(0,T.iH)(!1),m=(0,T.iH)(!1),u=(0,T.iH)(!1),p=(0,T.iH)(null),g=(0,T.iH)(null),f=(0,T.iH)(null),w=(0,T.iH)(null),x=(0,T.iH)(null),h=[{name:"username",required:!0,label:"Usuario",align:"left",field:"username"},{name:"email",required:!0,label:"Email",align:"left",field:"email"},{name:"carrera",required:!0,label:"Carrera",align:"left",field:"carrera"},{name:"fechaRegistro",required:!0,label:"Fecha registro",align:"left",field:"fechaRegistro",sortable:!0},{name:"actions",align:"left",label:"Acciones",field:"actions"}],v=(0,T.iH)([e=>!!e||"Correo institucional es requerido",e=>!/.+@|\..+/.test(e)||"Ingresa un correo válido"]),y=(0,T.iH)([]),_=(0,T.iH)(null),b=(0,T.iH)([]);function q(){try{N.api.post("./admin/administradores",{}).then((e=>{console.log(e.data);const a=e.data;a.map((e=>{console.log(e),e.fechaRegistro=z(e.fechaRegistro)})),y.value=a,r.value=!1,s.value=!1})).catch((e=>{console.log(e)}))}catch(e){r.value=!0,s.value=!1,setTimeout((()=>{q(),console.error(e)}),2e3)}}function W(e,a=!1){console.log(e),_.value=e,d.value=!0,1==a&&(console.log(_.value),d.value=!1,N.api.post("./admin/administrador/eliminar",{idAdmin:_.value}).then((e=>{console.log(e.data),_.value=null,q()})).catch((e=>{console.log(e)})))}function A(){const e={username:p.value,password:f.value,carrera:w.value};console.log(e),N.api.post("./admin/administrador/crear",{administrador:e}).then((e=>{console.log(e.data),m.value=!0,setTimeout((()=>{m.value=!1}),1500),c.value=!1,p.value=null,f.value=null,w.value=null,q()})).catch((e=>{console.log(e),u.value=!0,setTimeout((()=>{u.value=!1}),1500)}))}function C(e,a=!1){console.log(e),_.value=e,n.value=!0,1==a&&N.api.patch("./admin/administrador/cambiar-password",{idAdmin:e,password:x.value}).then((e=>{console.log(e.data),m.value=!0,setTimeout((()=>{m.value=!1,x.value=null}),1500),n.value=!1,q()})).catch((e=>{console.log(e),u.value=!0,setTimeout((()=>{u.value=!1}),1500)}))}function k(){N.api.get("./carreras").then((e=>{if(e.data.msg)console.log(e.data.msg);else{const a=e.data,l=[];a.map((e=>{l.push(e.nombre)})),b.value=l}})).catch((e=>console.error(e)))}function z(e){console.log(e);const a=new Date(e);return(0,L.Z)(a,"dd-MM-yyyy HH:mm:ss")}return(0,t.bv)((()=>{q(),k()})),{userStore:e,filterStore:i,dataApiStore:a,administrators:l,router:o,loadAdmins:q,administratorsLoaded:s,administratorsEmpty:r,tableColumns:h,tableRows:y,deleteAdministrator:W,dialogDeleteAdministrator:d,adminSelected:_,formatDate:z,changePasswordAdministrator:C,dialogChangeAdministratorPassword:n,dialogAddAdministrator:c,searchCareers:k,careersOptions:b,dialogCareer:w,dialogPassword:f,dialogUsername:p,createAdminsitrator:A,dialogSuccess:m,dialogError:u,dialogNewPassword:x,emailRules:v,dialogEmail:g}},methods:{toBack(){window.sessionStorage.removeItem("filter"),this.filterStore.clearFilter(),window.sessionStorage.removeItem("data-api"),this.dataApiStore.clearDataApi(),console.clear(),this.router.push({name:"admin-alumnos"})}}});var O=l(11639),G=l(11821),K=l(68879),J=l(44458),X=l(63190),$=l(96335),ee=l(69724),ae=l(31233),le=l(67220),te=l(67236),ie=l(87743),oe=l(66611),se=l(4581),re=l(22857),de=l(62146),ne=l(69984),ce=l.n(ne);const me=(0,O.Z)(M,[["render",E],["__scopeId","data-v-1132969a"]]),ue=me;ce()(M,"components",{QCardActions:G.Z,QBtn:K.Z,QCard:J.Z,QCardSection:X.Z,QSpinnerHourglass:$.Z,QTable:ee.Z,QTr:ae.Z,QTd:le.Z,QBtnGroup:te.Z,QDialog:ie.Z,QInput:oe.Z,QSelect:se.Z,QIcon:re.Z}),ce()(M,"directives",{ClosePopup:de.Z})}}]);