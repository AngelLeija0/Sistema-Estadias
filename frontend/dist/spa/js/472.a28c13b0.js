"use strict";(globalThis["webpackChunkestadias_quasar"]=globalThis["webpackChunkestadias_quasar"]||[]).push([[472],{88472:(e,t,l)=>{l.r(t),l.d(t,{default:()=>le});var a=l(59835),o=l(86970);const s=e=>((0,a.dD)("data-v-6366b3d4"),e=e(),(0,a.Cn)(),e),i={class:"container-fluid"},n={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},r={class:"row q-pt-md q-pl-xl q-pr-xl"},c={class:"col-6"},d=s((()=>(0,a._)("h5",{style:{margin:"0 0 10px 0","font-size":"18px","font-weight":"500"}}," Buscando registros por: ",-1))),u={style:{"text-transform":"capitalize","font-size":"14px"}},p={class:"col-6",style:{display:"flex","justify-content":"end","align-items":"flex-start"}},m={class:"row"},f={class:"col-6 q-px-md"},g={class:"col-6 q-px-md"},x={class:"col-12 q-pt-lg"},v=s((()=>(0,a._)("div",{style:{display:"flex","align-items":"center","padding-left":"30px"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"Mostrar")],-1))),h=s((()=>(0,a._)("div",{style:{display:"flex","align-items":"center"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"registros")],-1))),w={class:"container-fluid",style:{"background-color":"#f5f5f5","min-height":"50vh","margin-top":"0"}},y={class:"row"},_={key:0,class:"col-12",style:{display:"flex","justify-content":"center"}},b=s((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}},"Cargando alumnos",-1))),q={key:2,class:"col-12",style:{display:"flex","justify-content":"center"}},k=s((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}}," No se encontraron resultados ",-1))),S={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},z={class:"row q-pt-md q-pl-xl q-pr-xl"},C={class:"col-6",style:{"align-items":"end",display:"flex"}},W={class:"col-6",style:{display:"flex","justify-content":"end"}};function A(e,t,l,s,A,Z){const j=(0,a.up)("AdminNabvar"),H=(0,a.up)("q-btn"),E=(0,a.up)("q-card-actions"),Q=(0,a.up)("q-card"),D=(0,a.up)("q-dialog"),I=(0,a.up)("q-item-label"),P=(0,a.up)("q-item-section"),F=(0,a.up)("q-item"),R=(0,a.up)("q-list"),B=(0,a.up)("q-btn-dropdown"),L=(0,a.up)("q-btn-group"),N=(0,a.up)("q-spinner-hourglass"),T=(0,a.up)("q-card-section"),O=(0,a.up)("CardAlumno"),G=(0,a.up)("q-icon"),M=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(j,{onFilterStudents:e.loadStudents,onClearFilterStudents:e.loadStudents,style:{display:"none"}},null,8,["onFilterStudents","onClearFilterStudents"])]),(0,a._)("div",i,[(0,a.Wm)(E,{style:{"background-color":"#f5f5f5",display:"flex","justify-content":"start"}},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{flat:"",color:"black",label:"Regresar",icon:"arrow_left",style:{margin:"3px","text-transform":"capitalize","font-size":"16px"},onClick:e.toBack},null,8,["onClick"])])),_:1})]),(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",c,[d,(0,a._)("p",u,(0,o.zw)(e.filteringBy),1)]),(0,a._)("div",p,[(0,a.Wm)(E,{style:{"padding-top":"0"}},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{class:"q-icon-sm",color:"green-7","text-color":"white",label:"Excel","bg-color":"green",icon:"file_download",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"16px"},onClick:t[0]||(t[0]=t=>e.dialogExcel=!0)}),(0,a.Wm)(D,{modelValue:e.dialogExcel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.dialogExcel=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{class:"q-pa-xl q-ma-lg",style:{width:"600px","background-color":"#f5f5f5"}},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",f,[(0,a.Wm)(H,{color:"green-7","text-color":"white",label:"Excel General",style:{height:"100px","text-transform":"capitalize","font-size":"16px",width:"100%"},onClick:t[1]||(t[1]=t=>e.toGenerateExcel("general"))})]),(0,a._)("div",g,[(0,a.Wm)(H,{color:"green-7","text-color":"white",label:"Excel con filtros actuales",style:{height:"100px","text-transform":"capitalize","font-size":"16px",width:"100%"},onClick:t[2]||(t[2]=t=>e.toGenerateExcel("specific"))})]),(0,a._)("div",x,[(0,a.wy)((0,a.Wm)(H,{outline:"",color:"red",label:"Cancelar",style:{width:"100%"}},null,512),[[M]])])])])),_:1})])),_:1},8,["modelValue"]),v,(0,a.Wm)(B,{outline:"",color:"black",label:e.quantityRecords,style:{margin:"3px 5px",padding:"0px 0px 0 10px","text-transform":"capitalize","font-size":"16px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredRecords,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(F,{key:t,label:t,onClick:l=>e.setRecords(t),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","onClick"])),[[M]]))),128))])),_:1})])),_:1},8,["label"]),h])),_:1})])),_:1})])])]),(0,a._)("div",w,[(0,a._)("div",y,[e.studentsLoaded?((0,a.wg)(),(0,a.iD)("div",_,[(0,a.Wm)(Q,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[b,(0,a.Wm)(N,{color:"primary",size:"4em"})])),_:1})])),_:1})])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.students,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-lg-3 col-md-4 col-sm-6 col-6",key:t},[(0,a.Wm)(O,(0,a.dG)(e,{class:"q-ml-xl q-mr-xl q-mb-xl"}),null,16)])))),128)),e.studentsEmpty?((0,a.wg)(),(0,a.iD)("div",q,[(0,a.Wm)(Q,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[k,(0,a.Wm)(G,{name:"error_outline",color:"negative",size:"8em"})])),_:1})])),_:1})])):(0,a.kq)("",!0)])]),(0,a._)("div",S,[(0,a._)("div",z,[(0,a._)("div",C,[(0,a._)("p",null," Mostrando "+(0,o.zw)(e.qStudentsShowing)+" de "+(0,o.zw)(e.qTotalStudents)+" registros ",1)]),(0,a._)("div",W,[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(L,{flat:""},{default:(0,a.w5)((()=>[e.actualPage>1?((0,a.wg)(),(0,a.j4)(H,{key:0,label:"Anterior",icon:"navigate_before",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[4]||(t[4]=t=>e.setPage(e.actualPage-1))})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pages,(t=>((0,a.wg)(),(0,a.j4)(H,{key:t,color:t===e.actualPage?"dark":"grey-7",label:t,"text-color":"white",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px"},onClick:l=>e.setPage(t)},null,8,["color","label","onClick"])))),128)),e.actualPage+1<=e.pages.length?((0,a.wg)(),(0,a.j4)(H,{key:1,label:"Siguiente","icon-right":"navigate_next",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[5]||(t[5]=t=>e.setPage(e.actualPage+1))})):(0,a.kq)("",!0)])),_:1})])),_:1})])])])],64)}l(69665),l(62309);var Z=l(60499),j=l(17736),H=l(28339),E=l(7904),Q=l(91569),D=l(83851),I=l(78900);const P=(0,a.aZ)({name:"vinculacion-listaAlumnos",components:{AdminNabvar:D.Z,CardAlumno:I.Z},setup(){const e=(0,Z.iH)(!1),t=(0,E.f)(),l=(0,Z.iH)([]),o=(0,j.r)(),s=(0,H.tv)(),i=(0,Z.iH)(!0),n=(0,Z.iH)(!1),r=(0,Z.iH)(null),c=(0,Z.iH)(),d=(0,Z.iH)(8),u=(0,Z.iH)(1),p=(0,Z.iH)([]),m=(0,Z.iH)([8,12,14,16,18,20]),f=(0,Z.iH)(0),g=(0,Z.iH)(0);function x(){const t=window.sessionStorage.getItem("filter"),l=JSON.parse(t.replace("__q_objt|","")),a=l.estado;return e.value="liberados"===a||"historial"===a}function v(){const e=window.sessionStorage.getItem("filter"),t=JSON.parse(e.replace(/__q_objt\||__q_strn\|/g,""));let l="";Object.keys(t).map((e=>{"proceso"===t[e]?l+="Alumnos en proceso, ":"liberados"==t[e]?l+="Alumnos liberados, ":l+=t[e]+", "})),r.value=l.slice(0,-2)}function h(){try{console.log("Loading students ..."),n.value=!1,i.value=!0,l.value=[],v(),setTimeout((()=>{const e=window.sessionStorage.getItem("data-api");if(console.log(e),null===e)return h();const t=e.replace(/__q_objt\||__q_strn\|/g,"");if("No se encontraron alumnos"===t)return l.value=[],f.value=0,g.value=0,n.value=!0,i.value=!1,void v();const a=JSON.parse(t);if(0===Object.keys(a).length)return d.value=0,n.value=!0,void(i.value=!1);w(a)}),2e3)}catch(e){d.value=0,n.value=!0,i.value=!1,setTimeout((()=>{h(),console.error(e)}),2e3)}}function w(e){try{if("object"!==typeof e||null===e)return;const t=Object.keys(e).length,a=d.value;y(t,a);let o=0,s=u.value*d.value;u.value>1&&(o=(u.value-1)*d.value);let r=[];for(let l=0,i=o;l<a&&i<s;l++,i++)void 0!==e[i]&&r.push(e[i]);l.value=r,f.value=r.length,g.value=t,i.value=!1,n.value=!1,v()}catch(t){console.error(t)}}function y(e,t){const l=Math.ceil(e/t),a=u.value,o=5;let s=a-Math.floor(o/2);s<1?s=1:s+o-1>l&&(s=l-o+1);const i=Math.min(s+o-1,l),n=[];for(let r=s;r<=i;r++)n.push(r);p.value=n}function _(e){p.value.includes(e)?(u.value=e,h()):h()}function b(e){d.value=e,h()}return(0,a.bv)((()=>{v(),h(),x(),s.afterEach(((e,t)=>{"admin-listaAlumnos"===e.name&&h()}))})),(0,a.Jd)((()=>{s.afterEach()})),{filterStore:o,searchTypeOfNavbar:x,isNavbarWithDate:e,dataApiStore:t,students:l,router:s,loadStudents:h,studentsLoaded:i,studentsEmpty:n,filteringBy:r,loadFilter:v,quantityRecords:d,pages:p,records:m,actualPage:u,qStudentsShowing:f,qTotalStudents:g,studentsToShow:w,setRecords:b,setPage:_,generatePages:y,dialogExcel:c}},computed:{filter(){return!this.filterStore.getFilter&&window.sessionStorage.getItem("filter")&&this.filterStore.setFilter(window.sessionStorage.getItem("filter")),this.filterStore.getFilter},filteredRecords(){return this.records.filter((e=>e!==this.quantityRecords))}},methods:{toBack(){window.sessionStorage.removeItem("filter"),this.filterStore.clearFilter(),window.sessionStorage.removeItem("data-api"),this.dataApiStore.clearDataApi(),console.clear(),this.router.go(-1)},toGenerateExcel(e){console.log("Fetching Excel ...");const t=this.filterStore.filter,l=t.estado,a=t.nivelAcademico,o={estado:t.estado};null!==this.searcher&&(o.buscador=this.searcher),null!==this.selectedLevel?o.nivelAcademico=this.selectedLevel:a&&(o.nivelAcademico=a),this.selectedCareer&&(o.carrera=this.selectedCareer),this.selectedArea&&(o.area=this.selectedArea);let s="";"general"==e&&(s=`./admin/alumnos/${l}/excel-general`),"specific"==e&&(s=`./admin/alumnos/${l}/excel`),Q.api.post(s,{filtro:t},{responseType:"blob"}).then((e=>{if(e.data.msg)console.log(e.data.msg);else{const t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.setAttribute("download",`alumnos-${l}.xlsx`),document.body.appendChild(o),o.click(),document.body.removeChild(o)}})).catch((e=>console.error(e)))}}});var F=l(11639),R=l(11821),B=l(68879),L=l(67236),N=l(22857),T=l(87743),O=l(44458),G=l(32045),M=l(13246),J=l(490),U=l(76749),Y=l(33115),K=l(63190),V=l(96335),$=l(62146),X=l(69984),ee=l.n(X);const te=(0,F.Z)(P,[["render",A],["__scopeId","data-v-6366b3d4"]]),le=te;ee()(P,"components",{QCardActions:R.Z,QBtn:B.Z,QBtnGroup:L.Z,QIcon:N.Z,QDialog:T.Z,QCard:O.Z,QBtnDropdown:G.Z,QList:M.Z,QItem:J.Z,QItemSection:U.Z,QItemLabel:Y.Z,QCardSection:K.Z,QSpinnerHourglass:V.Z}),ee()(P,"directives",{ClosePopup:$.Z})}}]);