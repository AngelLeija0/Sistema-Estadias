"use strict";(globalThis["webpackChunkestadias_quasar"]=globalThis["webpackChunkestadias_quasar"]||[]).push([[776],{37776:(e,a,o)=>{o.r(a),o.d(a,{default:()=>A});var l=o(59835);const s=e=>((0,l.dD)("data-v-36660d72"),e=e(),(0,l.Cn)(),e),t={class:"login-container"},n={class:"login-card"},i={class:"login-form"},r=s((()=>(0,l._)("div",{class:"login-form-header"},"Recuperar contraseña",-1))),c={key:0,class:"row"},d=s((()=>(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-body2 q-pb-md"}," Ingresa tu correo institucional para enviarte un enlace para recuperar tu contraseña ")],-1))),u={class:"col-12"},m={class:"login-form-actions q-pt-md"},p={key:1,class:"row"},v=s((()=>(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-body2 q-pb-md"}," Revisa tu correo institucional e ingresa el codigo de recuperación. Si aun no lo has recibido prueba revisando en la seccion de spam o intentandolo nuevamente. ")],-1))),g={class:"col-12"},w={class:"login-form-actions q-pt-md"},b={key:2,class:"row"},f=s((()=>(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-body2 q-pb-md"}," Ingresa una nueva contraseña. ")],-1))),_={class:"col-12"},h=s((()=>(0,l._)("div",{class:"text-h6 q-pb-md q-pt-md"}," Correo institucional no encontrado ",-1))),q=s((()=>(0,l._)("div",{class:"text-h6 q-pb-md q-pt-md"}," Codigo incorrecto ",-1))),y=s((()=>(0,l._)("div",{class:"text-h6 q-pb-md q-pt-md"}," Ha ocurrido un errror. Intentalo nuevamente. ",-1))),W=s((()=>(0,l._)("div",{class:"text-h6 q-pb-md q-pt-md"}," Contraseña cambiada correctamente ",-1)));function k(e,a,o,s,k,C){const V=(0,l.up)("q-input"),x=(0,l.up)("q-btn"),S=(0,l.up)("q-section"),H=(0,l.up)("q-page"),P=(0,l.up)("q-icon"),E=(0,l.up)("q-card-section"),I=(0,l.up)("q-card"),Z=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(H,{class:"login-page"},{default:(0,l.w5)((()=>[(0,l._)("div",t,[(0,l._)("div",n,[(0,l._)("div",i,[r,e.isInStep1?((0,l.wg)(),(0,l.iD)("div",c,[d,(0,l._)("div",u,[(0,l.Wm)(S,{class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.email=a),rules:e.emailRules,type:"text",label:"Correo institucional",dense:"",outlined:"",class:"login-input","stack-label":"",color:"primary","bottom-slots":"prepend",onKeyup:a[1]||(a[1]=a=>e.verifyEmail(e.email)),"prefix-icon":"mdi-account"},null,8,["modelValue","rules"]),(0,l._)("div",m,[(0,l.Wm)(x,{label:"Enviar",type:"submit",color:"primary",class:"login-btn",rounded:"",small:"",disable:!e.isEmailValidated,onClick:e.submitStep1},null,8,["disable","onClick"]),(0,l.Wm)(x,{label:"Regresar",type:"reset",color:"dark",flat:"",class:"login-btn",rounded:"",small:"",onClick:e.toLoginPage},null,8,["onClick"])])])),_:1})])])):e.isInStep2?((0,l.wg)(),(0,l.iD)("div",p,[v,(0,l._)("div",g,[(0,l.Wm)(S,{class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:e.token,"onUpdate:modelValue":a[2]||(a[2]=a=>e.token=a),type:"text",label:"Codigo de recuperación",dense:"",outlined:"",class:"login-input","stack-label":"",color:"primary","bottom-slots":"prepend","prefix-icon":"mdi-account"},null,8,["modelValue"]),(0,l._)("div",w,[(0,l.Wm)(x,{label:"Enviar",type:"submit",color:"primary",class:"login-btn",rounded:"",small:"",onClick:e.submitStep2},null,8,["onClick"]),(0,l.Wm)(x,{label:"Probar otro correo",color:"dark",flat:"",class:"login-btn",rounded:"",small:"",onClick:e.toStep1},null,8,["onClick"])])])),_:1})])])):e.isInStep3?((0,l.wg)(),(0,l.iD)("div",b,[f,(0,l._)("div",_,[(0,l.Wm)(S,{class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:e.newPassword,"onUpdate:modelValue":a[3]||(a[3]=a=>e.newPassword=a),type:"password",label:"Contraseña",dense:"",outlined:"",class:"login-input","stack-label":"",color:"primary","bottom-slots":"prepend","prefix-icon":"mdi-account",rules:e.passwordRules},null,8,["modelValue","rules"]),(0,l.Wm)(V,{modelValue:e.newConfirmPassword,"onUpdate:modelValue":a[4]||(a[4]=a=>e.newConfirmPassword=a),type:"password",label:"Confirmar contraseña",dense:"",outlined:"",class:"login-input","stack-label":"",color:"primary","bottom-slots":"prepend","prefix-icon":"mdi-account",rules:e.confirmPasswordRules,onKeyup:e.verifyPassword},null,8,["modelValue","rules","onKeyup"]),(0,l._)("div",{class:"login-form-actions q-pt-md",onKeyup:a[5]||(a[5]=(...a)=>e.verifyPassword&&e.verifyPassword(...a))},[(0,l.Wm)(x,{label:"Cambiar",type:"submit",color:"primary",class:"login-btn",rounded:"",small:"",disable:!e.isPasswordValidated,onClick:e.submitStep3},null,8,["disable","onClick"])],32)])),_:1})])])):(0,l.kq)("",!0)])])])])),_:1}),(0,l.Wm)(Z,{modelValue:e.loginError,"onUpdate:modelValue":a[6]||(a[6]=a=>e.loginError=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{style:{width:"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"q-pa-lg text-center"},{default:(0,l.w5)((()=>[h,(0,l.Wm)(P,{name:"cancel",color:"red",size:"7em"})])),_:1}),(0,l.Wm)(E,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{modelValue:e.tokenError,"onUpdate:modelValue":a[7]||(a[7]=a=>e.tokenError=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{style:{width:"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"q-pa-lg text-center"},{default:(0,l.w5)((()=>[q,(0,l.Wm)(P,{name:"cancel",color:"red",size:"7em"})])),_:1}),(0,l.Wm)(E,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{modelValue:e.passwordError,"onUpdate:modelValue":a[8]||(a[8]=a=>e.passwordError=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{style:{width:"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"q-pa-lg text-center"},{default:(0,l.w5)((()=>[y,(0,l.Wm)(P,{name:"cancel",color:"red",size:"7em"})])),_:1}),(0,l.Wm)(E,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{modelValue:e.passwordSuccess,"onUpdate:modelValue":a[9]||(a[9]=a=>e.passwordSuccess=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{style:{width:"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"q-pa-lg text-center"},{default:(0,l.w5)((()=>[W,(0,l.Wm)(P,{name:"check",color:"positive",size:"7em"})])),_:1}),(0,l.Wm)(E,{class:"q-pt-none"})])),_:1})])),_:1},8,["modelValue"])],64)}o(69665);var C=o(60499),V=o(91569),x=o(49613),S=o(89322),H=o(28339);const P=(0,l.aZ)({name:"pagina-recuperacion",setup(){const e=(0,S.L)(),a=(0,H.tv)(),o=(0,C.iH)(),l=(0,C.iH)(!1),s=(0,C.iH)([e=>!!e||"Correo institucional es requerido",e=>/.+@.+\..+/.test(e)||"Ingresa un correo válido",e=>e.endsWith("@uttn.mx")||"El correo debe ser de @uttn.mx"]),t=(0,C.iH)([e=>!!e||"Contraseña es requerida",e=>e&&e.length>=8||"La contraseña debe tener al menos 8 caracteres"]),n=(0,C.iH)([e=>!!e||"Confirmar contraseña es requerido",e=>e===r.value||"Las contraseñas no coinciden"]),i=(0,C.iH)(!1),r=(0,C.iH)(),c=(0,C.iH)();function d(){return r.value===c.value?i.value=!0:i.value=!1}const u=(0,C.iH)(!1),m=(0,C.iH)(!1),p=(0,C.iH)(!1);function v(e){const a=/^(?=.{1,255}$)([a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+)*)(@uttn\.mx)$/;p.value=a.test(e)}const g=(0,C.iH)(!1),w=(0,C.iH)(),b=(0,C.iH)(!0),f=(0,C.iH)(!1),_=(0,C.iH)(!1);function h(){b.value=!0,f.value=!1,_.value=!1,p.value=!1,o.value=null}function q(){try{V.api.post("./login/recuperacion/enviar-email",{email:o.value}).then((e=>{"Código de verificación enviado exitosamente"===e.data.message?(b.value=!1,f.value=!0):(l.value=!0,setTimeout((()=>{l.value=!1}),1500))})).catch((e=>{console.log(e),l.value=!0,setTimeout((()=>{l.value=!1}),1500)}))}catch(e){console.log(e)}}function y(){try{V.api.post("./login/recuperacion/verificar-codigo",{email:o.value,token:w.value}).then((e=>{console.log(e.data),"Codigo correcto"===e.data.message?(f.value=!1,_.value=!0):(g.value=!0,setTimeout((()=>{g.value=!1}),1500))})).catch((e=>{console.log(e),g.value=!0,setTimeout((()=>{g.value=!1}),1500)}))}catch(e){console.log(e)}}function W(){try{V.api.post("./login/recuperacion/cambiar-password",{email:o.value,password:r.value}).then((e=>{"Contraseña cambiada correctamente"===e.data.message?(u.value=!0,setTimeout((()=>{u.value=!1,P()}),1500)):(m.value=!0,setTimeout((()=>{m.value=!1}),1500))})).catch((e=>{console.log(e),m.value=!0,setTimeout((()=>{m.value=!1}),1500)}))}catch(e){console.log(e)}}function k(e){"alumno"===e&&a.push({name:"alumno-inicio"}),"asesor"===e&&a.push({name:"asesor-inicio"}),"vinculacion"===e&&a.push({name:"vinculacion-inicio"}),"administrador"===e&&a.push({name:"admin-inicio"})}function P(){a.push({name:"pagina-login"})}return x.Z.getItem("user")&&(e.setUser(x.Z.getItem("user")),k(e.user.tipoUsuario)),{userStore:e,router:a,toIndex:k,loginError:l,toLoginPage:P,email:o,emailRules:s,isEmailValidated:p,verifyEmail:v,passwordRules:t,confirmPasswordRules:n,isPasswordValidated:i,verifyPassword:d,newPassword:r,newConfirmPassword:c,token:w,tokenError:g,isInStep1:b,isInStep2:f,isInStep3:_,submitStep1:q,submitStep2:y,submitStep3:W,toStep1:h,passwordSuccess:u,passwordError:m}}});var E=o(11639),I=o(69885),Z=o(66611),U=o(68879),R=o(87743),T=o(44458),Q=o(63190),z=o(22857),D=o(18149),L=o(69984),K=o.n(L);const $=(0,E.Z)(P,[["render",k],["__scopeId","data-v-36660d72"]]),A=$;K()(P,"components",{QPage:I.Z,QInput:Z.Z,QBtn:U.Z,QDialog:R.Z,QCard:T.Z,QCardSection:Q.Z,QIcon:z.Z,QField:D.Z})}}]);