"use strict";(globalThis["webpackChunkestadias_quasar"]=globalThis["webpackChunkestadias_quasar"]||[]).push([[933],{31933:(e,t,l)=>{l.r(t),l.d(t,{default:()=>X});var a=l(59835),s=l(86970);const o=e=>((0,a.dD)("data-v-54d85ae0"),e=e(),(0,a.Cn)(),e),n=o((()=>(0,a._)("div",{class:"container-fluid"},[(0,a._)("div",{class:"row q-pl-xl q-pr-xl",style:{"background-color":"#f5f5f5"}},[(0,a._)("h5",{style:{"font-size":"24px","font-weight":"500"}},"Alumnos asesorados")])],-1))),i={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},r={class:"row q-pt-md q-pl-xl q-pr-xl"},c={class:"col-6"},d=o((()=>(0,a._)("h5",{style:{margin:"0 0 10px 0","font-size":"18px","font-weight":"500"}}," Buscando registros por: ",-1))),u={style:{"text-transform":"capitalize","font-size":"14px"}},p={class:"col-6",style:{display:"flex","justify-content":"end","align-items":"flex-start"}},f=o((()=>(0,a._)("div",{style:{display:"flex","align-items":"center","padding-left":"30px"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"Mostrar")],-1))),m=o((()=>(0,a._)("div",{style:{display:"flex","align-items":"center"}},[(0,a._)("p",{style:{"font-size":"16px",margin:"0"}},"registros")],-1))),g={class:"container-fluid",style:{"background-color":"#f5f5f5","min-height":"50vh","margin-top":"0"}},v={class:"row"},x={key:0,class:"col-12",style:{display:"flex","justify-content":"center"}},h=o((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}},"Cargando alumnos",-1))),y={key:2,class:"col-12",style:{display:"flex","justify-content":"center"}},w=o((()=>(0,a._)("h1",{style:{"font-size":"24px","font-weight":"400"}}," No se encontraron resultados ",-1))),_={class:"container-fluid q-pb-lg",style:{"background-color":"#f5f5f5"}},b={class:"row q-pt-md q-pl-xl q-pr-xl"},q={class:"col-6",style:{"align-items":"end",display:"flex"}},S={class:"col-6",style:{display:"flex","justify-content":"end"}};function k(e,t,l,o,k,z){const C=(0,a.up)("AdminNabvar"),A=(0,a.up)("q-btn"),W=(0,a.up)("q-item-label"),Z=(0,a.up)("q-item-section"),j=(0,a.up)("q-item"),H=(0,a.up)("q-list"),Q=(0,a.up)("q-btn-dropdown"),I=(0,a.up)("q-btn-group"),P=(0,a.up)("q-card-actions"),D=(0,a.up)("q-spinner-hourglass"),L=(0,a.up)("q-card-section"),E=(0,a.up)("q-card"),F=(0,a.up)("CardAlumno"),N=(0,a.up)("q-icon"),R=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(C,{onFilterStudents:e.loadStudents,onClearFilterStudents:e.loadStudents,style:{display:"none"}},null,8,["onFilterStudents","onClearFilterStudents"])]),n,(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",c,[d,(0,a._)("p",u,(0,s.zw)(e.filteringBy),1)]),(0,a._)("div",p,[(0,a.Wm)(P,{style:{"padding-top":"0"}},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"q-icon-sm",color:"green-7","text-color":"white",label:"Excel","bg-color":"green",icon:"file_download",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"16px"},onClick:e.toGenerateExcel},null,8,["onClick"]),f,(0,a.Wm)(Q,{outline:"",color:"black",label:e.quantityRecords,style:{margin:"3px 5px",padding:"0px 0px 0 10px","text-transform":"capitalize","font-size":"16px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredRecords,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(j,{key:t,label:t,onClick:l=>e.setRecords(t),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","onClick"])),[[R]]))),128))])),_:1})])),_:1},8,["label"]),m])),_:1})])),_:1})])])]),(0,a._)("div",g,[(0,a._)("div",v,[e.studentsLoaded?((0,a.wg)(),(0,a.iD)("div",x,[(0,a.Wm)(E,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[h,(0,a.Wm)(D,{color:"primary",size:"4em"})])),_:1})])),_:1})])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.students,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-lg-3 col-md-4 col-sm-6 col-6",key:t},[(0,a.Wm)(F,(0,a.dG)(e,{class:"q-ml-xl q-mr-xl q-mb-xl"}),null,16)])))),128)),e.studentsEmpty?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(E,{class:"q-ma-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{class:"q-ml-xl q-mr-xl q-mt-sm q-mb-xl text-center"},{default:(0,a.w5)((()=>[w,(0,a.Wm)(N,{name:"error_outline",color:"negative",size:"8em"})])),_:1})])),_:1})])):(0,a.kq)("",!0)])]),(0,a._)("div",_,[(0,a._)("div",b,[(0,a._)("div",q,[(0,a._)("p",null," Mostrando "+(0,s.zw)(e.qStudentsShowing)+" de "+(0,s.zw)(e.qTotalStudents)+" registros ",1)]),(0,a._)("div",S,[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,{flat:""},{default:(0,a.w5)((()=>[e.actualPage>1?((0,a.wg)(),(0,a.j4)(A,{key:0,label:"Anterior",icon:"navigate_before",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[0]||(t[0]=t=>e.setPage(e.actualPage-1))})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pages,(t=>((0,a.wg)(),(0,a.j4)(A,{key:t,color:t===e.actualPage?"dark":"grey-7",label:t,"text-color":"white",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px"},onClick:l=>e.setPage(t)},null,8,["color","label","onClick"])))),128)),e.actualPage+1<=e.pages.length?((0,a.wg)(),(0,a.j4)(A,{key:1,label:"Siguiente","icon-right":"navigate_next",style:{margin:"3px",padding:"1px 15px","text-transform":"capitalize","font-size":"14px","font-weight":"400"},onClick:t[1]||(t[1]=t=>e.setPage(e.actualPage+1))})):(0,a.kq)("",!0)])),_:1})])),_:1})])])])],64)}l(69665),l(62309);var z=l(60499),C=l(28339),A=l(91569),W=l(7904),Z=l(17736),j=l(89322),H=l(83851),Q=l(78900);const I=(0,a.aZ)({name:"asesor-inicio",components:{AdminNabvar:H.Z,CardAlumno:Q.Z},setup(){const e=(0,j.L)(),t=(0,z.iH)(!1),l=(0,W.f)(),s=(0,z.iH)([]),o=(0,Z.r)(),n=(0,C.tv)(),i=(0,z.iH)(!0),r=(0,z.iH)(!1),c=(0,z.iH)(null),d=(0,z.iH)(8),u=(0,z.iH)(1),p=(0,z.iH)([]),f=(0,z.iH)([8,12,14,16,18,20]),m=(0,z.iH)(0),g=(0,z.iH)(0);function v(){const e=window.sessionStorage.getItem("filter"),l=JSON.parse(e.replace("__q_objt|","")),a=l.estado;return t.value="liberados"===a||"historial"===a}function x(){const e=window.sessionStorage.getItem("filter"),t=JSON.parse(e.replace(/__q_objt\||__q_strn\|/g,""));let l="";Object.keys(t).map((e=>{"proceso"===t[e]?l+="Alumnos en proceso, ":"liberados"==t[e]?l+="Alumnos liberados, ":l+=t[e]+", "})),c.value=l.slice(0,-2)}function h(){try{r.value=!1,i.value=!0,s.value=[],x(),setTimeout((()=>{const e=window.sessionStorage.getItem("data-api");if(null===e)return h();const t=e.replace(/__q_objt\||__q_strn\|/g,"");if("No se encontraron alumnos"===t)return s.value=[],m.value=0,g.value=0,r.value=!0,i.value=!1,void x();const l=JSON.parse(t);if(0===Object.keys(l).length)return d.value=0,r.value=!0,void(i.value=!1);y(l)}),2e3)}catch(e){d.value=0,r.value=!0,i.value=!1,setTimeout((()=>{loadStudent(),console.error(e)}),2e3)}}function y(e){try{if("object"!==typeof e||null===e)return;const t=Object.keys(e).length,l=d.value;w(t,l);let a=0,o=u.value*d.value;u.value>1&&(a=(u.value-1)*d.value);let n=[];for(let s=0,i=a;s<l&&i<o;s++,i++)void 0!==e[i]&&n.push(e[i]);s.value=n,m.value=n.length,g.value=t,i.value=!1,r.value=!1,x()}catch(t){console.error(t)}}function w(e,t){const l=Math.ceil(e/t),a=u.value,s=5;let o=a-Math.floor(s/2);o<1?o=1:o+s-1>l&&(o=l-s+1);const n=Math.min(o+s-1,l),i=[];for(let r=o;r<=n;r++)i.push(r);p.value=i}function _(e){p.value.includes(e)?(u.value=e,h()):h()}function b(e){d.value=e,h()}return(0,a.bv)((()=>{x(),h(),v(),n.afterEach(((e,t)=>{"admin-listaAlumnos"===e.name&&h()}))})),(0,a.Jd)((()=>{n.afterEach()})),{userStore:e,filterStore:o,searchTypeOfNavbar:v,isNavbarWithDate:t,dataApiStore:l,students:s,router:n,loadStudents:h,studentsLoaded:i,studentsEmpty:r,filteringBy:c,loadFilter:x,quantityRecords:d,pages:p,records:f,actualPage:u,qStudentsShowing:m,qTotalStudents:g,studentsToShow:y,setRecords:b,setPage:_,generatePages:w}},computed:{filter(){return!this.filterStore.getFilter&&window.sessionStorage.getItem("filter")&&this.filterStore.setFilter(window.sessionStorage.getItem("filter")),this.filterStore.getFilter},filteredRecords(){return this.records.filter((e=>e!==this.quantityRecords))}},methods:{toBack(){window.sessionStorage.removeItem("filter"),this.filterStore.clearFilter(),window.sessionStorage.removeItem("data-api"),this.dataApiStore.clearDataApi(),console.clear(),this.router.go(-1)},toGenerateExcel(){console.log("Excel generated");const e=this.userStore.getUser.id;console.log(e);const t=this.filterStore.filter,l={};null!==this.searcher&&(l.buscador=this.searcher),null!==this.selectedLevel?l.nivelAcademico=this.selectedLevel:academicLevel&&(l.nivelAcademico=academicLevel),this.selectedCareer&&(l.carrera=this.selectedCareer),this.selectedArea&&(l.area=this.selectedArea),A.api.post("./asesor/inicio/excel",{idAsesor:e,filtro:t},{responseType:"blob"}).then((e=>{if(e.data.msg)console.log(e.data.msg);else{const t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.setAttribute("download","alumnos-asesorados.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}})).catch((e=>console.error(e)))}}});var P=l(11639),D=l(11821),L=l(67236),E=l(68879),F=l(22857),N=l(32045),R=l(13246),T=l(490),B=l(76749),O=l(33115),M=l(44458),G=l(63190),J=l(96335),U=l(62146),Y=l(69984),K=l.n(Y);const V=(0,P.Z)(I,[["render",k],["__scopeId","data-v-54d85ae0"]]),X=V;K()(I,"components",{QCardActions:D.Z,QBtnGroup:L.Z,QBtn:E.Z,QIcon:F.Z,QBtnDropdown:N.Z,QList:R.Z,QItem:T.Z,QItemSection:B.Z,QItemLabel:O.Z,QCard:M.Z,QCardSection:G.Z,QSpinnerHourglass:J.Z}),K()(I,"directives",{ClosePopup:U.Z})}}]);